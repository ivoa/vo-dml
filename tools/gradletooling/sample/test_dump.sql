-- H2 2.3.232; 
SET DB_CLOSE_DELAY -1;         
;              
CREATE USER IF NOT EXISTS "" SALT '' HASH '' ADMIN;            
CREATE SCHEMA IF NOT EXISTS "SAMPLE" AUTHORIZATION "";         
CREATE SCHEMA IF NOT EXISTS "FILTER" AUTHORIZATION "";         
CREATE SEQUENCE "PUBLIC"."ASTROOBJECT_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;       
CREATE SEQUENCE "PUBLIC"."LUMINOSITYMEASUREMENT_SEQ" START WITH 1 RESTART WITH 101 INCREMENT BY 50;            
CREATE SEQUENCE "PUBLIC"."PHOTOMETRICSYSTEM_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50; 
CREATE SEQUENCE "PUBLIC"."PHOTOMETRYFILTER_SEQ" START WITH 1 RESTART WITH 101 INCREMENT BY 50; 
CREATE SEQUENCE "PUBLIC"."SOURCECATALOGUE_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;   
CREATE SEQUENCE "PUBLIC"."TESTING_SEQ" START WITH 1 INCREMENT BY 50;           
CREATE MEMORY TABLE "FILTER"."PHOTOMETRICSYSTEM"(
    "DETECTORTYPE" INTEGER NOT NULL,
    "ID" BIGINT NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255)
);   
ALTER TABLE "FILTER"."PHOTOMETRICSYSTEM" ADD CONSTRAINT "FILTER"."CONSTRAINT_3" PRIMARY KEY("ID");             
-- 1 +/- SELECT COUNT(*) FROM FILTER.PHOTOMETRICSYSTEM;        
INSERT INTO "FILTER"."PHOTOMETRICSYSTEM" VALUES
(1, 1, 'test photometric system');             
CREATE MEMORY TABLE "FILTER"."PHOTOMETRYFILTER"(
    "SPECTRALLOCATION_VALUE" FLOAT(53) NOT NULL,
    "ID" BIGINT NOT NULL,
    "PHOTOMETRICSYSTEM_ID" BIGINT,
    "DATAVALIDITYFROM" TIMESTAMP(6) NOT NULL,
    "DATAVALIDITYTO" TIMESTAMP(6) NOT NULL,
    "BANDNAME" CHARACTER VARYING(255) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255) NOT NULL,
    "FPSIDENTIFIER" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255) NOT NULL,
    "SPECTRALLOCATION_UNIT" CHARACTER VARYING(255) NOT NULL
);             
ALTER TABLE "FILTER"."PHOTOMETRYFILTER" ADD CONSTRAINT "FILTER"."CONSTRAINT_8" PRIMARY KEY("ID");              
-- 2 +/- SELECT COUNT(*) FROM FILTER.PHOTOMETRYFILTER;         
INSERT INTO "FILTER"."PHOTOMETRYFILTER" VALUES
(5.0, 1, 1, TIMESTAMP '2025-12-02 11:39:55.411', TIMESTAMP '2025-12-02 11:39:55.411', 'C-Band', 'radio band', NULL, 'C-Band', 'GHz'),
(1.5, 2, 1, TIMESTAMP '2025-12-02 11:39:55.411', TIMESTAMP '2025-12-02 11:39:55.411', 'L-Band', 'radio band', NULL, 'L-Band', 'GHz');     
CREATE MEMORY TABLE "SAMPLE"."ASTROOBJECT"(
    "POSITIONERROR_LATERROR" FLOAT(53),
    "POSITIONERROR_LONGERROR" FLOAT(53),
    "POSITIONERROR_MAJOR" FLOAT(53),
    "POSITIONERROR_MINOR" FLOAT(53),
    "POSITIONERROR_PA" FLOAT(53),
    "POSITIONERROR_RADIUS" FLOAT(53),
    "POSITION_LATITUDE_VALUE" FLOAT(53),
    "POSITION_LONGITUDE_VALUE" FLOAT(53),
    "ID" BIGINT NOT NULL,
    "SOURCECATALOGUE_ID" BIGINT,
    "POSITION_FRAME" CHARACTER VARYING(32),
    "ASTROOBJECT_SUBTYPE" CHARACTER VARYING(64) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "LABEL" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255),
    "POSITION_LATITUDE_UNIT" CHARACTER VARYING(255),
    "POSITION_LONGITUDE_UNIT" CHARACTER VARYING(255),
    "CLASSIFICATION" ENUM('AGN', 'GALAXY', 'PLANET', 'STAR', 'UNKNOWN')
);      
ALTER TABLE "SAMPLE"."ASTROOBJECT" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_C" PRIMARY KEY("ID");   
-- 1 +/- SELECT COUNT(*) FROM SAMPLE.ASTROOBJECT;              
INSERT INTO "SAMPLE"."ASTROOBJECT" VALUES
(0.1, 0.2, NULL, NULL, NULL, NULL, 52.5, 2.5, 1, 1, 'J2000', 'sample:catalog.SDSSSource', NULL, 'cepheid', 'testSource', 'degree', 'degree', 'AGN'); 
CREATE MEMORY TABLE "SAMPLE"."LUMINOSITYMEASUREMENT"(
    "ERROR_VALUE" FLOAT(53),
    "VALUE_VALUE" FLOAT(53),
    "ABSTRACTSOURCE_ID" BIGINT,
    "ID" BIGINT NOT NULL,
    "FILTER" BIGINT NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "ERROR_UNIT" CHARACTER VARYING(255),
    "VALUE_UNIT" CHARACTER VARYING(255),
    "TYPE" ENUM('FLUX', 'MAGNITUDE') NOT NULL
);           
ALTER TABLE "SAMPLE"."LUMINOSITYMEASUREMENT" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_4" PRIMARY KEY("ID");         
-- 2 +/- SELECT COUNT(*) FROM SAMPLE.LUMINOSITYMEASUREMENT;    
INSERT INTO "SAMPLE"."LUMINOSITYMEASUREMENT" VALUES
(0.25, 2.5, 1, 1, 1, 'lummeas', 'Jy', 'Jy', 'FLUX'),
(0.25, 3.5, 1, 2, 2, 'lummeas2', 'Jy', 'Jy', 'FLUX'); 
CREATE MEMORY TABLE "SAMPLE"."SKYCOORDINATEFRAME"(
    "NAME" CHARACTER VARYING(32) NOT NULL,
    "DOCUMENTURI" CHARACTER VARYING(255) NOT NULL,
    "EQUINOX" CHARACTER VARYING(255),
    "SYSTEM" CHARACTER VARYING(255)
);  
ALTER TABLE "SAMPLE"."SKYCOORDINATEFRAME" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_A" PRIMARY KEY("NAME");          
-- 1 +/- SELECT COUNT(*) FROM SAMPLE.SKYCOORDINATEFRAME;       
INSERT INTO "SAMPLE"."SKYCOORDINATEFRAME" VALUES
('J2000', 'http://coord.net', 'J2000.0', NULL);               
CREATE MEMORY TABLE "SAMPLE"."SOURCECATALOGUE"(
    "ID" BIGINT NOT NULL,
    "ATESTMORE_ID" BIGINT,
    "ATEST_ID" BIGINT,
    "NAME" CHARACTER VARYING(255) NOT NULL
);      
ALTER TABLE "SAMPLE"."SOURCECATALOGUE" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_4A82" PRIMARY KEY("ID");            
-- 1 +/- SELECT COUNT(*) FROM SAMPLE.SOURCECATALOGUE;          
INSERT INTO "SAMPLE"."SOURCECATALOGUE" VALUES
(1, NULL, NULL, 'testCat');      
CREATE MEMORY TABLE "SAMPLE"."TESTING"(
    "ID" BIGINT NOT NULL,
    "PLAIN" CHARACTER VARYING(255) NOT NULL,
    "UNBOUNDED" CHARACTER VARYING(255),
    "ARRAYISH" CHARACTER VARYING(255) ARRAY
);          
ALTER TABLE "SAMPLE"."TESTING" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_D" PRIMARY KEY("ID");       
-- 0 +/- SELECT COUNT(*) FROM SAMPLE.TESTING;  
ALTER TABLE "SAMPLE"."SOURCECATALOGUE" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_4A" UNIQUE NULLS DISTINCT ("ATESTMORE_ID");         
ALTER TABLE "SAMPLE"."SOURCECATALOGUE" ADD CONSTRAINT "SAMPLE"."CONSTRAINT_4A8" UNIQUE NULLS DISTINCT ("ATEST_ID");            
ALTER TABLE "SAMPLE"."ASTROOBJECT" ADD CONSTRAINT "SAMPLE"."FKGWPKMN3IMKW5SCNN53B359LH4" FOREIGN KEY("POSITION_FRAME") REFERENCES "SAMPLE"."SKYCOORDINATEFRAME"("NAME") NOCHECK;               
ALTER TABLE "SAMPLE"."SOURCECATALOGUE" ADD CONSTRAINT "SAMPLE"."FKQ1J3XAC8UIMJILJDAHC96UQT6" FOREIGN KEY("ATEST_ID") REFERENCES "SAMPLE"."TESTING"("ID") NOCHECK;              
ALTER TABLE "SAMPLE"."ASTROOBJECT" ADD CONSTRAINT "SAMPLE"."FKGJNJY0VATN6KK881G725MADII" FOREIGN KEY("SOURCECATALOGUE_ID") REFERENCES "SAMPLE"."SOURCECATALOGUE"("ID") NOCHECK;
ALTER TABLE "SAMPLE"."LUMINOSITYMEASUREMENT" ADD CONSTRAINT "SAMPLE"."FKQDST9Y9X0ODS4WPLRT9QW6HY" FOREIGN KEY("ABSTRACTSOURCE_ID") REFERENCES "SAMPLE"."ASTROOBJECT"("ID") NOCHECK;            
ALTER TABLE "SAMPLE"."SOURCECATALOGUE" ADD CONSTRAINT "SAMPLE"."FKRQEVPIFGX1WGEYRSCN0VSYUJ4" FOREIGN KEY("ATESTMORE_ID") REFERENCES "SAMPLE"."TESTING"("ID") NOCHECK;          
ALTER TABLE "SAMPLE"."LUMINOSITYMEASUREMENT" ADD CONSTRAINT "SAMPLE"."FKKOW2L1RQ4AREOVWW29XPPR1G8" FOREIGN KEY("FILTER") REFERENCES "FILTER"."PHOTOMETRYFILTER"("ID") NOCHECK; 
ALTER TABLE "FILTER"."PHOTOMETRYFILTER" ADD CONSTRAINT "FILTER"."FK8WSO70V67T2IGF2VJLINFD9VN" FOREIGN KEY("PHOTOMETRICSYSTEM_ID") REFERENCES "FILTER"."PHOTOMETRICSYSTEM"("ID") NOCHECK;       
