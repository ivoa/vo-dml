-- H2 2.3.232; 
SET DB_CLOSE_DELAY -1;         
;              
CREATE USER IF NOT EXISTS "" SALT '' HASH '' ADMIN;            
CREATE SCHEMA IF NOT EXISTS "LIFECYCLE" AUTHORIZATION "";      
CREATE SEQUENCE "PUBLIC"."ATEST2_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;            
CREATE SEQUENCE "PUBLIC"."ATEST3_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;            
CREATE SEQUENCE "PUBLIC"."ATEST4_SEQ" START WITH 1 INCREMENT BY 50;            
CREATE SEQUENCE "PUBLIC"."ATEST_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;             
CREATE SEQUENCE "PUBLIC"."CONTAINED_SEQ" START WITH 1 RESTART WITH 101 INCREMENT BY 50;        
CREATE SEQUENCE "PUBLIC"."REFERREDLIFECYCLE_SEQ" START WITH 1 RESTART WITH 101 INCREMENT BY 50;
CREATE SEQUENCE "PUBLIC"."REFERREDTO_SEQ" START WITH 1 RESTART WITH 51 INCREMENT BY 50;        
CREATE MEMORY TABLE "LIFECYCLE"."ATEST"(
    "ID" BIGINT NOT NULL,
    "CONTAINED2_ID" BIGINT,
    "REF1" BIGINT NOT NULL
);   
ALTER TABLE "LIFECYCLE"."ATEST" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_3B" PRIMARY KEY("ID");  
-- 1 +/- SELECT COUNT(*) FROM LIFECYCLE.ATEST; 
INSERT INTO "LIFECYCLE"."ATEST" VALUES
(1, NULL, 1);           
CREATE MEMORY TABLE "LIFECYCLE"."ATEST2"(
    "ID" BIGINT NOT NULL,
    "ATEST_ID" BIGINT,
    "REFCONT" BIGINT NOT NULL
);    
ALTER TABLE "LIFECYCLE"."ATEST2" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_73" PRIMARY KEY("ID"); 
-- 1 +/- SELECT COUNT(*) FROM LIFECYCLE.ATEST2;
INSERT INTO "LIFECYCLE"."ATEST2" VALUES
(1, 1, 1);             
CREATE MEMORY TABLE "LIFECYCLE"."ATEST3"(
    "ID" BIGINT NOT NULL,
    "REFBAD" BIGINT
);     
ALTER TABLE "LIFECYCLE"."ATEST3" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_73A" PRIMARY KEY("ID");
-- 1 +/- SELECT COUNT(*) FROM LIFECYCLE.ATEST3;
INSERT INTO "LIFECYCLE"."ATEST3" VALUES
(1, 1);
CREATE MEMORY TABLE "LIFECYCLE"."ATEST4"(
    "ID" BIGINT NOT NULL,
    "LOWR" BIGINT NOT NULL
);              
ALTER TABLE "LIFECYCLE"."ATEST4" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_73AB" PRIMARY KEY("ID");               
-- 0 +/- SELECT COUNT(*) FROM LIFECYCLE.ATEST4;
CREATE MEMORY TABLE "LIFECYCLE"."CONTAINED"(
    "ATEST3_ID" BIGINT,
    "ATEST_ID" BIGINT,
    "ID" BIGINT NOT NULL,
    "TEST2" CHARACTER VARYING(255) NOT NULL
);           
ALTER TABLE "LIFECYCLE"."CONTAINED" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_8" PRIMARY KEY("ID");               
-- 4 +/- SELECT COUNT(*) FROM LIFECYCLE.CONTAINED;             
INSERT INTO "LIFECYCLE"."CONTAINED" VALUES
(NULL, 1, 1, 'firstcontained'),
(NULL, 1, 2, 'secondContained'),
(1, NULL, 3, 'firstcontained-2'),
(1, NULL, 4, 'secondContained-2');               
CREATE MEMORY TABLE "LIFECYCLE"."REFERREDLIFECYCLE"(
    "ATEST_ID" BIGINT,
    "ID" BIGINT NOT NULL,
    "TEST3" CHARACTER VARYING(255) NOT NULL
);           
ALTER TABLE "LIFECYCLE"."REFERREDLIFECYCLE" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_8B" PRIMARY KEY("ID");      
-- 2 +/- SELECT COUNT(*) FROM LIFECYCLE.REFERREDLIFECYCLE;     
INSERT INTO "LIFECYCLE"."REFERREDLIFECYCLE" VALUES
(1, 1, 'rc1'),
(1, 2, 'rc2');               
CREATE MEMORY TABLE "LIFECYCLE"."REFERREDTO"(
    "TEST1" INTEGER NOT NULL,
    "ID" BIGINT NOT NULL
);        
ALTER TABLE "LIFECYCLE"."REFERREDTO" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_70" PRIMARY KEY("ID");             
-- 1 +/- SELECT COUNT(*) FROM LIFECYCLE.REFERREDTO;            
INSERT INTO "LIFECYCLE"."REFERREDTO" VALUES
(3, 1);            
CREATE MEMORY TABLE "PUBLIC"."ATEST2_REFERREDTO"(
    "ATEST2_ID" BIGINT NOT NULL,
    "REFAGG_ID" BIGINT NOT NULL
);          
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.ATEST2_REFERREDTO;        
INSERT INTO "PUBLIC"."ATEST2_REFERREDTO" VALUES
(1, 1);        
ALTER TABLE "LIFECYCLE"."ATEST" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_3" UNIQUE NULLS DISTINCT ("CONTAINED2_ID");             
ALTER TABLE "LIFECYCLE"."ATEST2" ADD CONSTRAINT "LIFECYCLE"."CONSTRAINT_7" UNIQUE NULLS DISTINCT ("ATEST_ID"); 
ALTER TABLE "LIFECYCLE"."ATEST2" ADD CONSTRAINT "LIFECYCLE"."FKDOQBR66SJ92D51TA0IC44AEGA" FOREIGN KEY("ATEST_ID") REFERENCES "LIFECYCLE"."ATEST"("ID") NOCHECK;
ALTER TABLE "LIFECYCLE"."ATEST" ADD CONSTRAINT "LIFECYCLE"."FK5OXFJU4451XQXGYMB214330XS" FOREIGN KEY("CONTAINED2_ID") REFERENCES "LIFECYCLE"."ATEST4"("ID") NOCHECK;           
ALTER TABLE "LIFECYCLE"."ATEST" ADD CONSTRAINT "LIFECYCLE"."FK4G8HARQ92B1ANVQMAH7KRGR0B" FOREIGN KEY("REF1") REFERENCES "LIFECYCLE"."REFERREDTO"("ID") NOCHECK;
ALTER TABLE "LIFECYCLE"."ATEST3" ADD CONSTRAINT "LIFECYCLE"."FKFQHK08CGPUJOILRBB5SACV7DB" FOREIGN KEY("REFBAD") REFERENCES "LIFECYCLE"."REFERREDLIFECYCLE"("ID") NOCHECK;      
ALTER TABLE "LIFECYCLE"."ATEST4" ADD CONSTRAINT "LIFECYCLE"."FKKTY800NJ429RVYFSIOGYL7PKT" FOREIGN KEY("LOWR") REFERENCES "LIFECYCLE"."REFERREDLIFECYCLE"("ID") NOCHECK;        
ALTER TABLE "LIFECYCLE"."CONTAINED" ADD CONSTRAINT "LIFECYCLE"."FK17S61RKJMSMU8JNWQ1FEG4NX0" FOREIGN KEY("ATEST_ID") REFERENCES "LIFECYCLE"."ATEST"("ID") NOCHECK;             
ALTER TABLE "LIFECYCLE"."CONTAINED" ADD CONSTRAINT "LIFECYCLE"."FK18TN5YK1W5LKNEW30HSRDHQ20" FOREIGN KEY("ATEST3_ID") REFERENCES "LIFECYCLE"."ATEST3"("ID") NOCHECK;           
ALTER TABLE "LIFECYCLE"."ATEST2" ADD CONSTRAINT "LIFECYCLE"."FKBFMJHWLO589X85ICGO5FU8QRP" FOREIGN KEY("REFCONT") REFERENCES "LIFECYCLE"."REFERREDLIFECYCLE"("ID") NOCHECK;     
ALTER TABLE "LIFECYCLE"."REFERREDLIFECYCLE" ADD CONSTRAINT "LIFECYCLE"."FKPAXB33S8IU3IW1OMJ9CMYQ73R" FOREIGN KEY("ATEST_ID") REFERENCES "LIFECYCLE"."ATEST"("ID") NOCHECK;     
ALTER TABLE "PUBLIC"."ATEST2_REFERREDTO" ADD CONSTRAINT "PUBLIC"."FKIPPTG4KSMH975SV056OOAPTTO" FOREIGN KEY("ATEST2_ID") REFERENCES "LIFECYCLE"."ATEST2"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."ATEST2_REFERREDTO" ADD CONSTRAINT "PUBLIC"."FKSCLCP9LKARKT1MM6FS5PDHJ22" FOREIGN KEY("REFAGG_ID") REFERENCES "LIFECYCLE"."REFERREDTO"("ID") NOCHECK;     
