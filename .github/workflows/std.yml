name: WD 1.1 cumulative PDF Preview generation

on:
  push:
    branches: [WD_1_1_cumulative]

jobs:
   build:
     runs-on: ubuntu-24.04

     steps:
       - name: Checkout
         uses: actions/checkout@v4
       - name: Setup dependencies
         run: |
           sudo apt -y update
           sudo apt -y install pandoc wkhtmltopdf
       - name: make the document
         working-directory: doc/std
         run: |
           make VO-DML.pdf
       - name: upload the std doc
         uses: actions/upload-artifact@v4
         with:
           name: VO-DML-WD-proposed
           path: doc/std/VO-DML.pdf
       - name: Creates a release in GitHub and uploads attachments
         env:
           GITHUB_TOKEN: ${{ github.TOKEN }}
           shell: bash
         run: |
           gh release delete WD-1.1-proposed  --cleanup-tag -y
           gh release -n "cumulative proposals for working draft" create WD-1.1-proposed doc/std/VO-DML.pdf 
